services:
  edirom-online-backend:
    container_name: eXist-db
    build:
      # location and name of backend Dockerfile
      context: ./backend   
      dockerfile: Dockerfile
      args:
        SOURCE: ${BE_SOURCE:-https://github.com/Edirom/Edirom-Online-Backend.git}
        BRANCH: ${BE_BRANCH:-v1.0.1}
        EDITION: ${EDITION_XAR}
    ports: !override
      # expose eXist-db
      - "8078:8080"
  edirom-online-frontend:
    container_name: nginx
    build:
      # location and name of frontend
      context: ./frontend
      dockerfile: Dockerfile
      args:
        SOURCE: ${FE_SOURCE:-https://github.com/Edirom/Edirom-Online-Frontend.git}
        BRANCH: ${FE_BRANCH:-v1.0.1}
        BACKEND_URL: ${BE_URL:-http://localhost:8078/exist/apps/Edirom-Online-Backend}
    ports:
      # expose nginx
      - "8079:80"